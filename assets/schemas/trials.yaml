id: https://w3id.org/bdm/trials/
name: bdmt
prefixes:
  linkml: https://w3id.org/linkml/
  bdmt: https://w3id.org/bdm/trials/
  studyflow: https://w3id.org/studyflow/
imports:
  - linkml:types
default_range: string
default_prefix: bdmt

enums:
  MultiTaskTypeEnum:
    enum_uri: bdmt:MultiTaskTypeEnum
    permissible_values:
      - none:
          description: No multitasking, i.e., single-tasking.
      - concurrent:
          description: There are two independent tasks that need to be completed in parallel.
      - compound:
          description: The task requires multiple successive stages or involves tasks that are dependent/coupled.

subsets:
  KeyVariables:
  ContextVariables:
  TaskVariables:
  StimulusVariables:
  OptionVariables:
  InputVariables:
  EvaluationVariables:
  ResponseVariables:
  FeedbackVariables:
  OutcomeVariables:
  AccessoryVariables:
  ExperimentalDesignVariables:
  

types:
  JobType:
    uri: linkml:string
    base: str
    description: Human-readable text to describe the type of job or task being performed by the agent.

classes:
  Trial:
    slots:
      - response_id
      - trial_id
      - study_name
      - group_name
      - agent_id
      - session_index
      - activity_index
      - language
      - instrument
      # - instrument_id
      # - instrument_repetition
      # - timeline_id
      # - timeline_repetition
      - multitask_type
      - task_index
      - job_type
      - job_description
      - job_repeat
      - block_index
      - block_name
      - block_type
      - transformation_name
      - trial_index
      - trial_start_datetime
      - trial_seed
      - stimuli
      # - stimulus_id
      # - stimulus_type
      # - stimulus_onset
      # - stimulus_panel_count
      # - stimulus_structure
      # - stimulus_structure_source_type
      # - stimulus_structure_source
      # - stimulus_set_size
      # - stimulus_count
      # - stimulus_source_type
      # - stimulus_source
      # - stimulus_index_in_source
      # - stimulus_position_index
      # - stimulus_description
      # - stimulus_role
      - options
      # - option_source_type
      # - option_source
      # - option_count
      # - option_id
      # - option_data_type
      # - measurement_type
      - inputs
      # - input_interface_type
      # - input_action_type
      # - input_count
      - responses
      # - expected_response_option_index
      # - expected_response_description
      # - response_structure
      # - response_count
      # - response_option_index
      # - response_description
      # - response_numeric
      # - response_time
      # - response_datetime
      # - response_validation_time
      # - response_initiation_time
      # - response_skipped
      - evaluations
      # - timed_out
      # - accuracy
      # - correct
      # - score
      # - evaluation_label
      - feedback_description
      - outcome_description
      - outcome_numeric
      - additional_measures
      - adaptive_method_name
      - adaptive_method_config
      - adaptive_parameter_name
      - adaptive_parameter_value
      - adaptive_parameter_value_next
  Attempt:  # container for multiple trials
    tree_root: true
    description: A collection of trial responses for a single agent in a single session.
    attributes:
      trials:
        multivalued: true
        inlined: true
        inlined_as_list: true
        array:
        range: Trial
  
  Stimulus:
    attributes:
      id:
      response_id:
      object_id:
      presentation_id:
      index_in_trial:
        range: integer
        minimum_value: 1
      onset:
        range: float
        minimum_value: 0
      duration:
        range: float
        minimum_value: 0
      panel_id:
      x_screen:
      y_screen:
      x_viewport:
      y_viewport:
      description:
      source:
      source_type:
      index_in_source:
      role:
      animation:

  Option:
  Input:
  StimulusComponent:
  OptionComponent:
  Instrument:

slots:

  response_id:
    identifier: true
    in_subset:
      - KeyVariables
    description: A unique identifier assigned to responses in temporal order.
    comments:
      -  In trials with multiple responses, the `id` is unique for each response.
  trial_id:
    in_subset:
      - TaskVariables
    description: An identifier assigned to the trial.
    comments:
      - In trials with multiple responses, the `trial_id` is the same for those responses.
    recommended: true
  trial_index:
    exact_mappings:
      - bdmt:trial_id
    in_subset:
      - TaskVariables
    range: integer
    minimum_value: 1
    recommended: false
    required: false
  study_name:
    in_subset:
      - ContextVariables
    description: The name of the study or experiment.
    range: string
    recommended: true
    required: false
  group_name:
    in_subset:
      - ContextVariables
    description: Subjects may be assigned to different groups. Typically, different groups will have different experiences within a study.
    range: string
    recommended: true
    required: false
  agent_id:
    in_subset:
      - ContextVariables
    description: An identifier assigned to the agent (typically a person) generating the responses.
    range: string
    recommended: true
    required: true
  session_index:
    in_subset:
      - ContextVariables
    description: When there are multiple sessions, this indicates the order of sessions.
    range: integer
    minimum_value: 1
    comments:
      - In studies with repeated sessions, session_index is different even if sessions are exact repetitions.
  activity_index:
    in_subset:
      - ContextVariables
    description: Indicates the order of activities within a session.
    range: integer
    minimum_value: 1
    comments:
      - In multi-activity sessions, even activities are the same, the activity_index is different.

  language:
    in_subset:
      - TaskVariables
    description: The language used in the task, expressed as a two-letter code in the ISO_639-1 standard.
    range: string
    todos:
      - Range should be a controlled vocabulary of ISO_639-1 codes.

  instrument:
    in_subset:
      - TaskVariables
    description: The name of the instrument used for collecting data (e.g., the name of the computer script used to run the test).
    range: Instrument
    required: true
    comments:
      -  This is a container for the instrument used in the trial.
    

  instrument_id:
    in_subset:
      - TaskVariables
    description: The unique identifier of the instrument used for collecting data (e.g., the name of the computer script used to run the test).
    range: string
    comments:
      -  Indicates corresponding file in the `instruments/` folder.
  timeline_id:
    in_subset:
      - TaskVariables
    description: Timelines are specific parameterization of an instrument.
    range: Instrument
    comments:
      -  Corresponds to the timeline_id in the Instrument.
    todos:
      - This is the actual foreign key for the `instrument` slot.

  instrument_repetition:
    in_subset:
      - TaskVariables
    description: The number of times this particular instrument has been completed in the past by this particular agent in this study. This variable has a value 0 the first time an instrument is used.
    range: integer
    minimum_value: 0
  timeline_repetition:
    in_subset:
      - TaskVariables
    description: The number of times this particular timeline has been completed in the past by this particular agent in this study. 0-index.
    range: integer
    minimum_value: 0

  multitask_type:
    in_subset:
      - TaskVariables
    description: The type of multitasking required, if any.
    range: MultiTaskTypeEnum
  task_index:
    in_subset:
      - TaskVariables
    description: When multitasking is required, `task_index` refers to each of the individual tasks. For example, for auditoy-visual dual N-back, `task_index=1` is the auditory task and `task_index=2` is the visual task.
    range: integer
    minimum_value: 1
  job_type:
    range: JobType
    recommended: true
    in_subset:
      - TaskVariables
  job_description:
    range: string
    in_subset:
      - TaskVariables
  job_repeat:
    in_subset:
      - TaskVariables
  block_index:
    in_subset:
      - TaskVariables
  block_name:
    in_subset:
      - TaskVariables
  block_type:
    in_subset:
      - TaskVariables
  transformation_name:
    in_subset:
      - TaskVariables
  trial_start_datetime:
    in_subset:
      - TaskVariables
  trial_seed:
    in_subset:
      - TaskVariables
    recommended: true

 
  stimuli:
    slot_group: stimulus_variable
    range: Stimulus
    multivalued: true
    inlined: true
    inlined_as_list: true
    notes:
      - Used in the trial to describe the stimuli presented to the agent.
      - This is a container for the stimuli presented to the agent.

  stimulus_index:
    slot_group: stimulus_variable
    range: integer
    minimum_value: 1
    todos:
      - in the trials table, this is a list of numbers.
  stimulus_id:
    slot_group: stimulus_variable
    range: Stimulus
    multivalued: true
    inlined: true
    inlined_as_list: true
  stimulus_type:
    slot_group: stimulus_variable
  stimulus_onset:
    slot_group: stimulus_variable
  stimulus_panel_count:
    slot_group: stimulus_variable
  stimulus_structure:
    slot_group: stimulus_variable
  stimulus_structure_source_type:
    slot_group: stimulus_variable
  stimulus_structure_source:
    slot_group: stimulus_variable
  stimulus_set_size:
    slot_group: stimulus_variable
  stimulus_count:
    slot_group: stimulus_variable
  stimulus_source_type:
    slot_group: stimulus_variable
  stimulus_source:
    slot_group: stimulus_variable
  stimulus_index_in_source:
    slot_group: stimulus_variable
  stimulus_position_index:
    slot_group: stimulus_variable
  stimulus_description:
    slot_group: stimulus_variable
  stimulus_role:
    slot_group: stimulus_variable

  options:
    slot_group: option_variable
    range: Option
    multivalued: true
    inlined: true
    inlined_as_list: true
    notes:
      - Used in the trial to describe the options available to the agent.
      - This is a container for options.
  option_source_type:
    slot_group: option_variable
  option_source:
    slot_group: option_variable
  option_count:
    slot_group: option_variable
  option_id:
    slot_group: option_variable
  option_data_type:
    slot_group: option_variable
  measurement_type:
    slot_group: option_variable

  inputs:
    slot_group: input_variable
    range: Input
    multivalued: true
    inlined: true
    inlined_as_list: true
    notes:
      - Used in the trial to describe the inputs entered by the the agent.
      - This is a container for inputs.
      - Response is not synonymous with input.
  input_interface_type:
    slot_group: input_variable
  input_action_type:
    slot_group: input_variable
  input_count:
    slot_group: input_variable

  responses:
    slot_group: response_variable
    range: string
    multivalued: true
    inlined: true
    inlined_as_list: true
    notes:
      - Used in the trial to describe the responses by the agent.
      - This is a container for responses.
  expected_response_option_index:
    slot_group: expectation_variable
  expected_response_description:
    slot_group: expectation_variable
  response_structure:
    slot_group: response_variable
  response_count:
    slot_group: response_variable
  response_option_index:
    slot_group: response_variable
  response_description:
    slot_group: response_variable
  response_numeric:
    slot_group: response_variable
  response_time:
    slot_group: response_variable
  response_datetime:
    slot_group: response_variable
  response_validation_time:
    slot_group: response_variable
  response_initiation_time:
    slot_group: response_variable
  response_skipped:
    slot_group: response_variable

  evaluations:
    slot_group: evaluation_variable
    range: string
    multivalued: true
    inlined: true
    inlined_as_list: true
    notes:
      - Used in the trial to describe the evaluations of the responses.
      - This is a container for evaluations.
  timed_out:
    slot_group: evaluation_variable
  accuracy:
    slot_group: evaluation_variable
    range: float
    minimum_value: 0
    maximum_value: 1
  correct:
    slot_group: evaluation_variable
    range: boolean
  score:
    slot_group: evaluation_variable
    description:  a numeric score that represents the performance or quality of the response.
    range: float
  evaluation_label:
    slot_group: evaluation_variable
    description: A label assigned to the evaluation of the response, typically a string that describes the evaluation in a human-readable format.

  feedback_description:
    slot_group: feedback_variable
  outcome_description:
    slot_group: outcome_variable
  outcome_numeric:
    slot_group: outcome_variable

  adaptive_method_name:
    slot_group: experimental_design_variable
  adaptive_method_config:
    slot_group: experimental_design_variable
  adaptive_parameter_name:
    slot_group: experimental_design_variable
  adaptive_parameter_value:
    slot_group: experimental_design_variable
  adaptive_parameter_value_next:
    slot_group: experimental_design_variable

  additional_measures:
    slot_group: accessory_variable
